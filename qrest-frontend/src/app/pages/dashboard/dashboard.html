<div class="min-h-screen bg-gray-50 p-6 md:p-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">Panel del Restaurante üçΩÔ∏è</h1>

  <!-- Error State -->
  <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
    <strong class="font-bold">Error: </strong>
    <span class="block sm:inline">{{ error }}</span>
    <p class="text-sm mt-2">Verifica que el backend est√© corriendo en http://localhost:8080</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
    <p class="mt-4 text-gray-600">Cargando datos...</p>
  </div>

  <div *ngIf="!loading && !error">
    <!-- Acciones r√°pidas -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <a routerLink="/platillos" class="rounded-2xl p-5 bg-white shadow hover:shadow-lg transition block">
        <div class="text-sm text-gray-500">Platillos</div>
        <div class="text-3xl font-extrabold">{{ dishCount }}</div>
        <div class="mt-3 inline-block px-3 py-1 rounded bg-blue-600 text-white text-sm">Gestionar</div>
      </a>

      <a routerLink="/platillos/crear" class="rounded-2xl p-5 bg-white shadow hover:shadow-lg transition block">
        <div class="text-sm text-gray-500">Acci√≥n r√°pida</div>
        <div class="text-xl font-semibold">+ Nuevo platillo</div>
        <div class="mt-3 inline-block px-3 py-1 rounded border text-sm">Crear ahora</div>
      </a>

      <a routerLink="/menus" class="rounded-2xl p-5 bg-white shadow hover:shadow-lg transition block">
        <div class="text-sm text-gray-500">Men√∫s</div>
        <div class="text-3xl font-extrabold">{{ menuCount }}</div>
        <div class="mt-3 inline-block px-3 py-1 rounded bg-green-600 text-white text-sm">Gestionar</div>
      </a>

      <a routerLink="/menus/crear" class="rounded-2xl p-5 bg-white shadow hover:shadow-lg transition block">
        <div class="text-sm text-gray-500">Acci√≥n r√°pida</div>
        <div class="text-xl font-semibold">+ Nuevo men√∫</div>
        <div class="mt-3 inline-block px-3 py-1 rounded border text-sm">Crear ahora</div>
      </a>
    </div>

    <!-- Recientes -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Platillos recientes -->
      <div class="bg-white rounded-2xl shadow">
        <div class="p-5 border-b">
          <h2 class="text-xl font-bold">Platillos recientes</h2>
        </div>
        <div class="p-5">
          <div *ngIf="recentDishes.length === 0" class="text-gray-500">
            A√∫n no hay platillos. <a routerLink="/platillos/crear" class="text-blue-600 underline">Crea el primero</a>.
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4" *ngIf="recentDishes.length > 0">
            <div *ngFor="let d of recentDishes" class="p-4 border rounded-xl hover:shadow transition">
              <img *ngIf="d.imageUrl" [src]="d.imageUrl" alt="{{ d.name }}"
                class="w-full h-28 object-cover rounded mb-2">
              <div *ngIf="!d.imageUrl"
                class="w-full h-28 bg-gradient-to-br from-orange-100 to-red-100 rounded mb-2 flex items-center justify-center">
                <span class="text-3xl">üçΩÔ∏è</span>
              </div>
              <div class="font-semibold">{{ d.name }}</div>
              <div class="text-sm text-gray-600 truncate">{{ d.description }}</div>
              <div class="font-bold text-green-600 mt-1">$ {{ d.price | number:'1.2-2' }}</div>
              <div class="flex gap-2 mt-3">
                <a [routerLink]="['/platillos/editar', d.id]"
                  class="px-3 py-1 text-sm rounded bg-yellow-500 text-white hover:bg-yellow-600">Editar</a>
                <a routerLink="/platillos" class="px-3 py-1 text-sm rounded border">Ver todos</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Men√∫s recientes -->
      <div class="bg-white rounded-2xl shadow">
        <div class="p-5 border-b">
          <h2 class="text-xl font-bold">Men√∫s recientes</h2>
        </div>
        <div class="p-5">
          <div *ngIf="recentMenus.length === 0" class="text-gray-500">
            A√∫n no hay men√∫s. <a routerLink="/menus/crear" class="text-blue-600 underline">Crea el primero</a>.
          </div>

          <div class="space-y-4" *ngIf="recentMenus.length > 0">
            <div *ngFor="let m of recentMenus" class="p-4 border rounded-xl hover:shadow transition">
              <div class="flex items-start justify-between">
                <div>
                  <div class="font-semibold text-lg">{{ m.name }}</div>
                  <div class="text-sm text-gray-600">
                    Platillos: {{ getDishesCount(m) }}
                  </div>
                </div>
                <div class="flex gap-2">
                  <a [routerLink]="['/menus/editar', m.id]"
                    class="px-3 py-1 text-sm rounded bg-yellow-500 text-white hover:bg-yellow-600">Editar</a>
                  <a *ngIf="m.qrCode" [routerLink]="['/public-menu', m.qrCode]"
                    class="px-3 py-1 text-sm rounded bg-green-600 text-white hover:bg-green-700">Ver p√∫blico</a>
                </div>
              </div>
              <div class="mt-3 text-sm text-gray-700" *ngIf="m.dishes && m.dishes.length > 0">
                <!-- listar hasta 3 platillos -->
                <span *ngFor="let d of m.dishes.slice(0, 3)" class="inline-block mr-2">
                  ‚Ä¢ {{ d.name }}
                </span>
                <span *ngIf="m.dishes.length > 3" class="text-gray-500">
                  +{{ m.dishes.length - 3 }} m√°s
                </span>
              </div>
            </div>
            <div>
              <a routerLink="/menus" class="px-3 py-1 text-sm rounded border">Ver todos</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>